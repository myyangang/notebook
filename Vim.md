# Vim

参考资料：

- [《Vim实用技巧》]()

# §2 实用技巧

## §2.1 `.`命令

`.`命令用于重复执行上一次的操作。从本质上来说，该命令是一种宏。所以对于高频次的重复操作，问题就转化为如何将这种操作设计成`.`命令可以重复的方式。

### §2.1.1 空格格式化

给定以下任务，要求字符串之间的加号两侧带有空格：

```
"123"+"456"+"789"
"123" + "456" + "789"
```

操作步骤如下：

1. 将光标移动到行首，使用`f+`找到本行的第一个加号。
2. 使用`s`删除光标所在的字符，即第一个加号。
3. 输入`<空格>+<空格>`为第一个加号的两侧补充空格，按`<Esc>`退出。
4. 使用`;`表示向右查找后面的加号，再使用`.`命令重复第2、3步操作。
5. 重复第4步操作。

### §2.1.2 选择性替换

使用`%s/<原字符串>/<新字符串>/g`进行全局替换时，我们无法决定单个匹配项是否应该替换。

```
like appoint play
dislike disappoint play
```

下面介绍一种方法：

1. 将光标

## §2.2 复合命令

Vim将很多常用的两步操作合并成了一步，而这一步操作通常都是插入命令。

| 复合命令 | 复合命令的作用                 | 等效的长命令 | 等效的长命令作用                                   |
| -------- | ------------------------------ | ------------ | -------------------------------------------------- |
| `A`      | 在一行的结尾添加内容           | `$a`         | 将光标移动到最后一行，然后在光标的后面进入插入模式 |
| `s`      | 删除光标下的字符并进入编辑模式 | `cl`         | 更改光标右侧的字符                                 |
| `S`      |                                | `^c`         | ？？？？？？？                                     |
| `I`      |                                | `^i`         |                                                    |
| `A`      |                                | `$a`         |                                                    |
| `o`      |                                | `A<回车>`    |                                                    |
| `O`      |                                | `ko`         |                                                    |

## §2.3 重复与撤销

Vim为许多命令提过了对应的重复命令和撤销命令。

| 操作                       | 作用                           | 重复命令 | 撤销命令 |
| -------------------------- | ------------------------------ | -------- | -------- |
| 一次修改                   | `{编辑}`                       | `.`      | `u`      |
| 在行内搜索下一个字符位置   | `f{字符}`/`t{字符}`            | `;`      | `,`      |
| 在行内搜索上一个字符位置   | `F{字符}`/`T{字符}`            | `;`      | `,`      |
| 在文档中搜索下一处匹配位置 | `/<字符串><回车>`              | `n`      | `N`      |
| 在文档中搜索上一处匹配位置 | `?<字符串><回车>`              | `n`      | `N`      |
| 一次替换                   | `:s/<原字符串>/<替换后字符串>` | `n`      | `u`      |
| 多次修改                   | `qx{编辑}q`                    | `@x`     | `u`      |